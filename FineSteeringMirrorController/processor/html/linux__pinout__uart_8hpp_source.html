<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESC FilterWheel C++ Source: linux_pinout_uart.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESC FilterWheel C++ Source
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('linux__pinout__uart_8hpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">linux_pinout_uart.hpp</div></div>
</div><!--header-->
<div class="contents">
<a href="linux__pinout__uart_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">//</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">//</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// This software is copyrighted by and is the sole property of Franks</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// Development, LLC. All rights, title, ownership, or other interests</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// in the software remain the property of Franks Development, LLC. This</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">// software may only be used in accordance with the corresponding</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// license agreement.  Any unauthorized use, duplication, transmission,</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// distribution, or disclosure of this software is expressly forbidden.</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">//</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// This Copyright notice may not be removed or modified without prior</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// written consent of Franks Development, LLC.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">//</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">// Franks Development, LLC. reserves the right to modify this software</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">// without notice.</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">//</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">// Franks Development, LLC            support@franks-development.com</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// 500 N. Bahamas Dr. #101           http://www.franks-development.com</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">// Tucson, AZ 85710</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">// USA</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">//</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">// Permission granted for perpetual non-exclusive end-use by the University of Arizona August 1, 2020</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">//</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#ifndef _linux_pinout_uart_h</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#define _linux_pinout_uart_h</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;stdio.h&gt;</span>   <span class="comment">/* Standard input/output definitions */</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;string.h&gt;</span>  <span class="comment">/* String function definitions */</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;unistd.h&gt;</span>  <span class="comment">/* UNIX standard function definitions */</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;fcntl.h&gt;</span>   <span class="comment">/* File control definitions */</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;errno.h&gt;</span>   <span class="comment">/* Error number definitions */</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;termios.h&gt;</span> <span class="comment">/* POSIX terminal control definitions */</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment">//~ #include &lt;termbits.h&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span> <span class="comment">/* ioctl() */</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &lt;sys/socket.h&gt;</span> <span class="comment">/* FIONREAD on cygwin */</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &lt;linux/serial.h&gt;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &lt;spawn.h&gt;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;format/formatf.h&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="IUart_8h.html">IUart.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="foldopen" id="foldopen00048" data-start="{" data-end="};">
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html">   48</a></span><span class="keyword">class </span><a class="code hl_class" href="classlinux__pinout__uart.html">linux_pinout_uart</a> : <span class="keyword">public</span> <a class="code hl_class" href="classIUart.html">IUart</a></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>{</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a091a28e54ef5d6f5d08f2a9000a44b98">   52</a></span>    <a class="code hl_function" href="classlinux__pinout__uart.html#a091a28e54ef5d6f5d08f2a9000a44b98">linux_pinout_uart</a>() : <a class="code hl_class" href="classIUart.html">IUart</a>(), <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>(-1), <a class="code hl_variable" href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">echo</a>(false), <a class="code hl_variable" href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">autoreopen</a>(false), <a class="code hl_variable" href="classlinux__pinout__uart.html#a8e8a9dd5ea5bba02d3fb38d68e14d9cf">Baud</a>(0), <a class="code hl_variable" href="classlinux__pinout__uart.html#a3de4f0fbe4ed751fb91e9e8d8894edd8">RtsCts</a>(false), <a class="code hl_variable" href="classlinux__pinout__uart.html#ad5a3c0a3812dadfd0490adc25b927a2d">OddParity</a>(false) { }</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>        </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#ac84a6af46b4cf5c05e62567cc0b37877">   54</a></span>    <span class="keyword">virtual</span> <a class="code hl_function" href="classlinux__pinout__uart.html#ac84a6af46b4cf5c05e62567cc0b37877">~linux_pinout_uart</a>() { <span class="keywordflow">if</span> (-1 != <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>) { close(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>); } }</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <span class="comment">//~ Table 3 - Termios Structure Members Member  Description</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>            <span class="comment">//~ c_cflag Control options</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>            <span class="comment">//~ c_lflag Line options</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>            <span class="comment">//~ c_iflag Input options</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>            <span class="comment">//~ c_oflag Output options</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>            <span class="comment">//~ c_cc    Control characters</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>            <span class="comment">//~ c_ispeed    Input baud (new interface)</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>            <span class="comment">//~ c_ospeed    Output baud (new interface)</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        <span class="comment">//~ The c_cflag member controls the baud rate, number of data bits, parity, stop bits, and hardware flow control. There are constants for all of the supported configurations.</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>            <span class="comment">//~ CS8 8 data bits</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        <span class="comment">//~ CREAD   Enable receiver</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        <span class="comment">//~ CLOCAL  Local line - do not change &quot;owner&quot; of port</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        <span class="comment">//~ The c_cflag member contains two options that should always be enabled, CLOCAL and CREAD. These will ensure that your program does not become the &#39;owner&#39; of the port subject to sporatic job control and hangup signals, and also that the serial interface driver will read incoming data bytes.</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        <span class="comment">//~ The baud rate constants (CBAUD, B9600, etc.) are used for older interfaces that lack the c_ispeed and c_ospeed members. See the next section for information on the POSIX functions used to set the baud rate.</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        <span class="comment">//~ Never initialize the c_cflag (or any other flag) member directly; you should always use the bitwise AND, OR, and NOT operators to set or clear bits in the members. Different operating system versions (and even patches) can and do use the bits differently, so using the bitwise operators will prevent you from clobbering a bit flag that is needed in a newer serial driver.</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        <span class="comment">//~ The baud rate is stored in different places depending on the operating system. Older interfaces store the baud rate in the c_cflag member using one of the baud rate constants in table 4, while newer implementations provide the c_ispeed and c_ospeed members that contain the actual baud rate value.</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        <span class="comment">//~ The cfsetospeed(3) and cfsetispeed(3) functions are provided to set the baud rate in the termios structure regardless of the underlying operating system interface. Typically you&#39;d use the code in Listing 2 to set the baud rate.</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>           <span class="comment">//~ struct termios options;</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>            <span class="comment">//~ Get the current options for the port...</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>            <span class="comment">//~ tcgetattr(ComFileDescriptor, &amp;options);</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>            <span class="comment">//~ Set the baud rates to 19200...</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>            <span class="comment">//~ cfsetispeed(&amp;options, B19200);</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>            <span class="comment">//~ cfsetospeed(&amp;options, B19200);</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>            <span class="comment">//~ * Enable the receiver and set local mode...</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>            <span class="comment">//~ com_settings.c_cflag |= (CLOCAL | CREAD);</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>              <span class="comment">//~ com_settings.c_cflag &amp;= ~CSIZE; /* Mask the character size bits */</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>            <span class="comment">//~ com_settings.c_cflag |= CS8;    /* Select 8 data bits */</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>            <span class="comment">//~ com_settings.c_cflag &amp;= ~PARENB</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>            <span class="comment">//~ com_settings.c_cflag &amp;= ~CSTOPB</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            <span class="comment">//~ com_settings.c_cflag &amp;= ~CSIZE;</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>            <span class="comment">//~ com_settings.c_cflag |= CS8;</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>             <span class="comment">//~ com_settings.c_cflag &amp;= ~CNEW_RTSCTS; //to disable hardware flow control</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>            <span class="comment">//~ Set the new options for the port...</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            <span class="comment">//~ tcsetattr(ComFileDescriptor, TCSANOW, &amp;options);</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        <span class="comment">//~ The tcgetattr(3) function fills the termios structure you provide with the current serial port configuration. After we set the baud rates and enable local mode and serial data receipt, we select the new configuration using tcsetattr(3). The TCSANOW constant specifies that all changes should occur immediately without waiting for output data to finish sending or input data to finish receiving. There are other constants to wait for input and output to finish or to flush the input and output buffers.</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        <span class="comment">//~ Most systems do not support different input and output speeds, so be sure to set both to the same value for maximum portability.</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        <span class="comment">//~ Table 5 - Constants for tcsetattr Constant  Description</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="comment">//~ TCSANOW Make changes now without waiting for data to complete</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="comment">//~ TCSADRAIN   Wait until everything has been transmitted</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        <span class="comment">//~ TCSAFLUSH   Flush input and output buffers and make the change</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        <span class="comment">//~ The O_NOCTTY flag tells UNIX that this program doesn&#39;t want to be the &quot;controlling terminal&quot; for that port. If you don&#39;t specify this then any input (such as keyboard abort signals and so forth) will affect your process. Programs like getty(1M/8) use this feature when starting the login process, but normally a user program does not want this behavior.</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        <span class="comment">//~ The O_NDELAY flag tells UNIX that this program doesn&#39;t care what state the DCD signal line is in - whether the other end of the port is up and running. If you do not specify this flag, your process will be put to sleep until the DCD signal line is the space voltage.</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        <span class="comment">//~ The local modes member c_lflag controls how input characters are managed by the serial driver. In general you will configure the c_lflag member for canonical or raw input.</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <span class="comment">//~ Table 6 - Constants for the c_lflag Member Constant Description</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        <span class="comment">//~ ISIG    Enable SIGINTR, SIGSUSP, SIGDSUSP, and SIGQUIT signals</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        <span class="comment">//~ ICANON  Enable canonical input (else raw)</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        <span class="comment">//~ XCASE   Map uppercase \lowercase (obsolete)</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <span class="comment">//~ ECHO    Enable echoing of input characters</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        <span class="comment">//~ ECHOE   Echo erase character as BS-SP-BS</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        <span class="comment">//~ ECHOK   Echo NL after kill character</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>        <span class="comment">//~ ECHONL  Echo NL</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        <span class="comment">//~ NOFLSH  Disable flushing of input buffers after interrupt or quit characters</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        <span class="comment">//~ IEXTEN  Enable extended functions</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        <span class="comment">//~ ECHOCTL Echo control characters as ^char and delete as ~?</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        <span class="comment">//~ ECHOPRT Echo erased character as character erased</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="comment">//~ ECHOKE  BS-SP-BS entire line on line kill</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        <span class="comment">//~ FLUSHO  Output being flushed</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <span class="comment">//~ PENDIN  Retype pending input at next read or input char</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <span class="comment">//~ TOSTOP  Send SIGTTOU for background output</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>            <span class="comment">//~ Canonical input is line-oriented. Input characters are put into a buffer which can be edited interactively by the user until a CR (carriage return) or LF (line feed) character is received.</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        <span class="comment">//~ When selecting this mode you normally select the ICANON, ECHO, and ECHOE options:</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>            <span class="comment">//~ com_settings.c_lflag |= (ICANON | ECHO | ECHOE);</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        <span class="comment">//~ Raw input is unprocessed. Input characters are passed through exactly as they are received, when they are received. Generally you&#39;ll deselect the ICANON, ECHO, ECHOE, and ISIG options when using raw input:</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <span class="comment">//~ com_settings.c_lflag &amp;= ~(ICANON | ECHO | ECHOE | ISIG);</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        <span class="comment">//~ Never enable input echo (ECHO, ECHOE) when sending commands to a MODEM or other computer that is echoing characters, as you will generate a feedback loop between the two serial interfaces!</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        <span class="comment">//~ Constant    Description</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        <span class="comment">//~ INPCK   Enable parity check</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        <span class="comment">//~ IGNPAR  Ignore parity errors</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="comment">//~ PARMRK  Mark parity errors</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        <span class="comment">//~ ISTRIP  Strip parity bits</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        <span class="comment">//~ IXON    Enable software flow control (outgoing)</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        <span class="comment">//~ IXOFF   Enable software flow control (incoming)</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        <span class="comment">//~ IXANY   Allow any character to start flow again</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <span class="comment">//~ IGNBRK  Ignore break condition</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <span class="comment">//~ BRKINT  Send a SIGINT when a break condition is detected</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="comment">//~ INLCR   Map NL to CR</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="comment">//~ IGNCR   Ignore CR</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="comment">//~ ICRNL   Map CR to NL</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <span class="comment">//~ IUCLC   Map uppercase to lowercase</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="comment">//~ IMAXBEL Echo BEL on input line too long</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        <span class="comment">//~ To disable software flow control simply mask those bits: com_settings.c_iflag &amp;= ~(IXON | IXOFF | IXANY);</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <span class="comment">//~ Raw output is selected by resetting the OPOST option in the c_oflag member:</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        <span class="comment">//~ com_settings.c_oflag &amp;= ~OPOST;</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <span class="comment">//~ When the OPOST option is disabled, all other option bits in c_oflag are ignored.</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <span class="comment">//~ The c_cc character array contains control character definitions as well as timeout parameters. Constants are defined for every element of this array.</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        </div>
<div class="foldopen" id="foldopen00142" data-start="{" data-end="}">
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#ac3caab2514512ce7592f3cdd15187b83">  142</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code hl_function" href="classlinux__pinout__uart.html#ac3caab2514512ce7592f3cdd15187b83">init</a>(<span class="keyword">const</span> uint32_t Baudrate, <span class="keyword">const</span> <span class="keywordtype">char</span>* device, <span class="keyword">const</span> <span class="keywordtype">bool</span> UseRtsCts = <a class="code hl_variable" href="classIUart.html#a5596bc1c37a997ad63f6fd7273f0f582">IUart::NoRTSCTS</a>, <span class="keyword">const</span> <span class="keywordtype">bool</span> UseOddParity = <a class="code hl_variable" href="classIUart.html#a9405c72ad2eb119d094adf84745a0354">IUart::NoParity</a>, <span class="keywordtype">int</span> OpenFlags = O_RDWR | O_NOCTTY | O_NONBLOCK | O_SYNC)</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        <a class="code hl_variable" href="classlinux__pinout__uart.html#a8e8a9dd5ea5bba02d3fb38d68e14d9cf">Baud</a> = Baudrate;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        strncpy(<a class="code hl_variable" href="classlinux__pinout__uart.html#a2de843ce978e2079aab5a2b3f3fefad2">Device</a>, device, <a class="code hl_variable" href="classlinux__pinout__uart.html#a620f564c864c51767b1cd6a9191fab96">DeviceMaxLen</a>);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        <a class="code hl_variable" href="classlinux__pinout__uart.html#a3de4f0fbe4ed751fb91e9e8d8894edd8">RtsCts</a> = UseRtsCts;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <a class="code hl_variable" href="classlinux__pinout__uart.html#ad5a3c0a3812dadfd0490adc25b927a2d">OddParity</a> = UseOddParity;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        termios com_settings;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <span class="comment">//close if previously opened</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <span class="keywordflow">if</span> (-1 != <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>) { close(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>); }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="comment">//open port</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a> = open(device, OpenFlags); <span class="comment">//O_NDELAY makes open, write, and read non-blocking; since we have dataready() this is uneccesary &amp; dangerous...</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a> &lt; 0)</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        {</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>            <span class="keywordtype">int</span> err = errno;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            <span class="comment">//~ perror(err);</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>            printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): Can&#39;t open COM-Port %s ! (Error: %dd (0x%X))\n&quot;</span>, device, err, err);</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            <span class="keywordflow">return</span>(err);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        }</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <span class="comment">//put port into non-blocking mode (returns &#39;\0&#39; if no chars waiting)...</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <span class="comment">//~ fcntl(ComFileDescriptor, F_SETFL, 0);</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <span class="comment">//get current port settings (initializes struct correctly for us)</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        tcgetattr(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, &amp;com_settings);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment">//~ ifneq ($(findstring Darwin,$(OSTYPE)),)</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span><span class="comment">//~ CFLAGS+=-D__APPLE__</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="comment">//~ else</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span><span class="comment">//~ CFLAGS      += -static</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="comment">//~ endif</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span><span class="comment">//~ #ifdef __APPLE__</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="comment">//~ #define NEWTERMIOS_SETBAUDARTE(bps) IspEnvironment-&gt;newtio.c_ispeed = IspEnvironment-&gt;newtio.c_ospeed = bps;</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="comment">//~ #else</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment">//~ #define NEWTERMIOS_SETBAUDARTE(bps) IspEnvironment-&gt;newtio.c_cflag |= bps;</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="comment">//~ #endif</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <span class="keywordflow">switch</span>(Baudrate)</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>            <span class="keywordflow">case</span> 1152000: com_settings.c_cflag |= B1152000; cfsetispeed(&amp;com_settings, B1152000); cfsetospeed(&amp;com_settings, B1152000); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            <span class="keywordflow">case</span>  921600: com_settings.c_cflag |= B921600; cfsetispeed(&amp;com_settings, B921600); cfsetospeed(&amp;com_settings, B921600); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            <span class="keywordflow">case</span>  460800: com_settings.c_cflag |= B460800; cfsetispeed(&amp;com_settings, B460800); cfsetospeed(&amp;com_settings, B460800); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>            <span class="keywordflow">case</span>  230400: com_settings.c_cflag |= B230400; cfsetispeed(&amp;com_settings, B230400); cfsetospeed(&amp;com_settings, B230400); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>            <span class="keywordflow">case</span>  115200: com_settings.c_cflag |= B115200; cfsetispeed(&amp;com_settings, B115200); cfsetospeed(&amp;com_settings, B115200); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>            <span class="keywordflow">case</span>   57600: com_settings.c_cflag |= B57600; cfsetispeed(&amp;com_settings, B57600); cfsetospeed(&amp;com_settings, B57600); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>            <span class="keywordflow">case</span>   38400: com_settings.c_cflag |= B38400; cfsetispeed(&amp;com_settings, B38400); cfsetospeed(&amp;com_settings, B38400); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            <span class="keywordflow">case</span>   19200: com_settings.c_cflag |= B19200; cfsetispeed(&amp;com_settings, B19200); cfsetospeed(&amp;com_settings, B19200); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            <span class="keywordflow">case</span>    9600: com_settings.c_cflag |= B9600; cfsetispeed(&amp;com_settings, B9600); cfsetospeed(&amp;com_settings, B9600); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>            <span class="keywordflow">case</span>    4800: com_settings.c_cflag |= B4800; cfsetispeed(&amp;com_settings, B4800); cfsetospeed(&amp;com_settings, B4800); <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            <span class="keywordflow">default</span>: </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            { </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>                <span class="keywordtype">bool</span> useterm2 = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>                </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>                printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): non-standard baudrate %u; strap in we&#39;re goin&#39; off-roadin&#39;\n&quot;</span>, Baudrate); </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>                </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>                serial_struct serial;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>                </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>                <span class="keywordflow">if</span> (ioctl(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TIOCGSERIAL, &amp;serial))</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>                {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>                    printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): non-standard baudrate ioctl(TIOCGSERIAL) failed.&quot;</span>); </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>                    useterm2 = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>                }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>                </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>                serial.flags &amp;= ~ASYNC_SPD_MASK;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>                serial.flags |= ASYNC_SPD_CUST;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>                serial.custom_divisor = serial.baud_base / Baudrate;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                <span class="comment">//ugly hack:</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                <span class="keywordflow">if</span> (0 == serial.baud_base)</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>                {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                    useterm2 = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>                {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                    <span class="keywordflow">if</span> (ioctl(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TIOCSSERIAL, &amp;serial))</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>                    {</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>                        printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): non-standard baudrate ioctl(TIOCSSERIAL) failed.&quot;</span>); </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>                        useterm2 = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>                    }</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>                }</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>                </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>                <span class="keywordflow">if</span> (useterm2)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                    printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): non-standard baudrate clock of zero detected; assuming Nvidia Orin 408MHz clock...&quot;</span>); </div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                    </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>                    serial.baud_base = 408000000;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                    </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>                    <span class="comment">//~ termios2 tty;</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>                    <span class="keyword">struct </span>termios2</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>                    {</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                      tcflag_t c_iflag;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                      tcflag_t c_oflag;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                      tcflag_t c_cflag;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                      tcflag_t c_lflag;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>                      cc_t c_cc[NCCS];</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>                      cc_t c_line;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                      speed_t c_ispeed;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                      speed_t c_ospeed;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                    } tty;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                    <span class="comment">// Read in the terminal settings using ioctl instead</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                    <span class="comment">// of tcsetattr (tcsetattr only works with termios, not termios2)</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                    <span class="keywordflow">if</span> (ioctl(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCGETS2, &amp;tty))</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                    {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                        perror(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): non-standard baudrate, ioctl(fd, TCGETS2, &amp;tty) failed: &quot;</span>);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                    }</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                    <span class="comment">// Set everything but baud rate as usual</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                    <span class="comment">// ...</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                    <span class="comment">// ...</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                    <span class="comment">// Set custom baud rate</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                    tty.c_cflag &amp;= ~CBAUD;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                    tty.c_cflag |= CBAUDEX;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                    <span class="comment">// On the internet there is also talk of using the &quot;BOTHER&quot; macro here:</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                    <span class="comment">// tty.c_cflag |= BOTHER;</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                    <span class="comment">// I never had any luck with it, so omitting in favour of using</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                    <span class="comment">// CBAUDEX</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                    tty.c_ispeed = Baudrate; <span class="comment">// What a custom baud rate!</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                    tty.c_ospeed = Baudrate;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                    <span class="comment">// Write terminal settings to file descriptor</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                    <span class="keywordflow">if</span> (ioctl(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCSETS2, &amp;tty))</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                    {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                        perror(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): non-standard baudrate, ioctl(fd, TCSETS2, &amp;tty) failed: &quot;</span>);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                    }</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): non-standard baudrate settings complete; Clock: %u, divider: %u, actual baud: %lf.\n&quot;</span>, serial.baud_base, serial.custom_divisor, (<span class="keywordtype">double</span>)serial.baud_base / (<span class="keywordtype">double</span>)serial.custom_divisor); </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span> </div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>            }</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <span class="comment">//raw input mode:</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        <span class="comment">//~ com_settings.c_lflag &amp;= ~(ICANON | ECHO | ECHOE | ISIG);</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        com_settings.c_lflag = 0;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        <span class="comment">//raw output mode:</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        <span class="comment">//~ com_settings.c_oflag &amp;= ~OPOST;</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        com_settings.c_oflag = 0;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>                </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        <span class="comment">//enable single-byte input &amp; output:</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        cfmakeraw(&amp;com_settings);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span> </div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        com_settings.c_cflag |= (CLOCAL | CREAD);</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        com_settings.c_cflag &amp;= ~CSIZE; <span class="comment">/* Mask the character size bits */</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        com_settings.c_cflag |= CS8;    <span class="comment">/* Select 8 data bits */</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        com_settings.c_cflag &amp;= ~CSTOPB;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="keywordflow">if</span> (UseRtsCts) { com_settings.c_cflag |= CRTSCTS; }</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        <span class="keywordflow">else</span> { com_settings.c_cflag &amp;= ~CRTSCTS; }</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <span class="keywordflow">if</span> (UseOddParity) </div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        { </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): Odd parity!\n&quot;</span>); </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>            com_settings.c_iflag &amp;= ~IGNPAR;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>            com_settings.c_cflag |= PARODD; </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>            com_settings.c_cflag |= PARENB; </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        }</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="keywordflow">else</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        { </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>            com_settings.c_iflag |= IGNPAR;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            com_settings.c_cflag &amp;= ~PARENB; </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>            com_settings.c_cflag &amp;= ~PARODD;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        }</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="comment">//write settings to the port:</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        <span class="keywordflow">if</span>(tcsetattr(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCSANOW, &amp;com_settings))</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>            <span class="keywordtype">int</span> err = errno;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>            <span class="comment">//~ perror(err);</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>            printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::init(): Could not change serial port (%s) behaviour (wrong baudrate?) (Error: %dd (0x%X))\n&quot;</span>, device, err, err);</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>            <span class="keywordflow">return</span>(err);</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        <span class="comment">//clear input &amp; output buffers</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        tcflush(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCOFLUSH);</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>        tcflush(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCIFLUSH);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="keywordflow">return</span>(<a class="code hl_variable" href="classIUart.html#a9b07f9f0939ad012fe6cf88945419f6e">IUartOK</a>);</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    }</div>
</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="foldopen" id="foldopen00326" data-start="{" data-end="}">
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#ad03be9ea9049db75a79f297f166edc65">  326</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classlinux__pinout__uart.html#ad03be9ea9049db75a79f297f166edc65">deinit</a>()</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <span class="keywordflow">if</span> (-1 == <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        tcflush(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCOFLUSH);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        tcflush(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCIFLUSH);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        close(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>);</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    }</div>
</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#af789f9adecfa28194c741e798eb50583">  335</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classlinux__pinout__uart.html#af789f9adecfa28194c741e798eb50583">Echo</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span>(<a class="code hl_variable" href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">echo</a>); }</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a735eb21c5d7a21cfcbec5a09d3b09bcc">  336</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a735eb21c5d7a21cfcbec5a09d3b09bcc">Echo</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> e) { <a class="code hl_variable" href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">echo</a> = e; }</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span> </div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <span class="comment">//~ In Chapter 2, Configuring the Serial Port we used the tcgetattr and tcsetattr functions to configure the serial port. Under UNIX these functions use the ioctl(2) system call to do their magic.</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        <span class="comment">//~ The ioctl system call takes three arguments:</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        <span class="comment">//~ int ioctl(int ComFileDescriptor, int request, ...);</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        <span class="comment">//~ The ComFileDescriptor argument specifies the serial port file descriptor. The request argument is a constant defined in the &lt;termios.h&gt; header file and is typically one of the constants listed in Table 10.</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>        <span class="comment">//~ Table 10 - IOCTL Requests for Serial Ports Request  Description POSIX Function</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        <span class="comment">//~ TCGETS  Gets the current serial port settings.  tcgetattr</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>        <span class="comment">//~ TCSETS  Sets the serial port settings immediately.  tcsetattr(ComFileDescriptor, TCSANOW, &amp;options)</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        <span class="comment">//~ TCSETSF Sets the serial port settings after flushing the input and output buffers.  tcsetattr(ComFileDescriptor, TCSAFLUSH, &amp;options)</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        <span class="comment">//~ TCSETSW Sets the serial port settings after allowing the input and output buffers to drain/empty.   tcsetattr(ComFileDescriptor, TCSADRAIN, &amp;options)</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <span class="comment">//~ TCSBRK  Sends a break for the given time.   tcsendbreak, tcdrain</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <span class="comment">//~ TCXONC  Controls software flow control. tcflow</span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        <span class="comment">//~ TCFLSH  Flushes the input and/or output queue.  tcflush</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        <span class="comment">//~ TIOCMGET    Returns the state of the &quot;MODEM&quot; bits.  None</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        <span class="comment">//~ TIOCMSET    Sets the state of the &quot;MODEM&quot; bits. None</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        <span class="comment">//~ FIONREAD    Returns the number of bytes in the input buffer.    None</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <span class="comment">//~ Getting the Number of Bytes Available</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        <span class="comment">//~ The FIONREAD ioctl gets the number of bytes in the serial port input buffer. As with TIOCMGET you pass in a pointer to an integer to hold the number of bytes, as shown in Listing 7.</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="comment">//~ Listing 7 - Getting the number of bytes in the input buffer.</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            <span class="comment">//~ #include &lt;unistd.h&gt;</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            <span class="comment">//~ #include &lt;termios.h&gt;</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>            <span class="comment">//~ int ComFileDescriptor;</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>            <span class="comment">//~ int bytes;</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            <span class="comment">//~ ioctl(ComFileDescriptor, FIONREAD, &amp;bytes);</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <span class="comment">//~ This can be useful when polling a serial port for data, as your program can determine the number of bytes in the input buffer before attempting a read.</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> </div>
<div class="foldopen" id="foldopen00363" data-start="{" data-end="}">
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a3a4c13fd7b6bce8061b37438a029e21c">  363</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a3a4c13fd7b6bce8061b37438a029e21c">dataready</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <span class="keywordflow">if</span> (-1 == <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>) { printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::dataready(): ioctl on uninitialized port; please open port!\n&quot;</span>); <span class="keywordflow">return</span>(<span class="keyword">false</span>); }</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <span class="comment">//Didn&#39;t work under cygwin:</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <span class="comment">//~ {</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            <span class="comment">//~ int BytesWaitingToRead = 0;</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="comment">//~ int err = ioctl(ComFileDescriptor, FIONREAD, &amp;BytesWaitingToRead); //get number of bytes in input buffer</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            <span class="comment">//~ if (0 != err) { printf(&quot;linux_pinout_uart::dataready(): ioctl err: %u, errno: %u\n&quot;, err, errno); return(false); }</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            <span class="comment">//~ return(0 != BytesWaitingToRead);</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="comment">//~ }</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        </div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <span class="keyword">struct </span>timeval tvptr;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        fd_set rset;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="ads1258_8h.html#aff251facbcc9240b47fafda164302bd1">status</a> = -1;</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <span class="keywordtype">int</span> rtnval = 0;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a> != -1)</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            <span class="comment">/* Zero out the seconds and microseconds so we don&#39;t block */</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            tvptr.tv_sec = 0;</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            tvptr.tv_usec = 0;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>            <span class="comment">/* Initialize the read set to zero */</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            FD_ZERO(&amp;rset);</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span> </div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            <span class="comment">/* And now turn on the read set */</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            FD_SET(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>,&amp;rset);</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>            <a class="code hl_variable" href="ads1258_8h.html#aff251facbcc9240b47fafda164302bd1">status</a> = select(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a> + 1,&amp;rset,NULL,NULL,&amp;tvptr);</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="ads1258_8h.html#aff251facbcc9240b47fafda164302bd1">status</a> == -1) <span class="comment">/* Error */</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>            {</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>                fprintf(stderr,<span class="stringliteral">&quot;\nlinux_pinout_uart::dataready(): select() returned -1\n&quot;</span>);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                rtnval = 0;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>            }</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="ads1258_8h.html#aff251facbcc9240b47fafda164302bd1">status</a> &gt; 0)</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>                <span class="keywordflow">if</span> (FD_ISSET(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>,&amp;rset))</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>                {</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>                    rtnval = 1;</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>                }</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>            }</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        }</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        <span class="keywordflow">return</span>(rtnval);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    }</div>
</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="comment">//~ Reading data from a port is a little trickier. When you operate the port in raw data mode, each read(2) system call will return the number of characters that are actually available in the serial input buffers. If no characters are available, the call will block (wait) until characters come in, an interval timer expires, or an error occurs. The read function can be made to return immediately by doing the following:</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        <span class="comment">//~ fcntl(ComFileDescriptor, F_SETFL, FNDELAY);</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        <span class="comment">//~ The FNDELAY option causes the read function to return 0 if no characters are available on the port. To restore normal (blocking) behavior, call fcntl() without the FNDELAY option:</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        <span class="comment">//~ fcntl(ComFileDescriptor, F_SETFL, 0);</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <span class="comment">//~ This is also used after opening a serial port with the O_NDELAY option.</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="foldopen" id="foldopen00420" data-start="{" data-end="}">
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a4ec5263e4a98bd3d1b827a98e4e8e90d">  420</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">char</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a4ec5263e4a98bd3d1b827a98e4e8e90d">getcqq</a>()</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    {</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="keywordtype">char</span> c = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span> </div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        <span class="keywordflow">if</span> (-1 == <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>) { printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::getcqq(): read on uninitialized port; please open port!\n&quot;</span>); <span class="keywordflow">return</span>(<span class="charliteral">&#39;\0&#39;</span>); }</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <span class="keywordtype">size_t</span> len = read(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, &amp;c, 1);</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        <span class="keywordflow">if</span> (len != 1) </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>        { </div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>            printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::getcqq(): read failure (len: %lu, errno: %lu)\n&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)len, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)errno);</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            </div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">autoreopen</a>) </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            {</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>                printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::autoreopen.\n&quot;</span>);</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                <a class="code hl_function" href="classlinux__pinout__uart.html#ad03be9ea9049db75a79f297f166edc65">deinit</a>();</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>                <a class="code hl_function" href="classlinux__pinout__uart.html#ac3caab2514512ce7592f3cdd15187b83">init</a>(<a class="code hl_variable" href="classlinux__pinout__uart.html#a8e8a9dd5ea5bba02d3fb38d68e14d9cf">Baud</a>, <a class="code hl_variable" href="classlinux__pinout__uart.html#a2de843ce978e2079aab5a2b3f3fefad2">Device</a>, <a class="code hl_variable" href="classlinux__pinout__uart.html#a3de4f0fbe4ed751fb91e9e8d8894edd8">RtsCts</a>, <a class="code hl_variable" href="classlinux__pinout__uart.html#ad5a3c0a3812dadfd0490adc25b927a2d">OddParity</a>);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            }       </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            <span class="keywordflow">return</span>(<span class="charliteral">&#39;\0&#39;</span>); </div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        }</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span> </div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        <span class="comment">//~ if (len != 1) { return(&#39;\0&#39;); }</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">echo</a>) { <a class="code hl_function" href="ads1258_8h.html#aac4a82c72fa3b8a5f87bfa525126205b">formatf</a>(<span class="stringliteral">&quot;&lt;%.2x &quot;</span>, (uint8_t)c); }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        <span class="keywordflow">return</span>(c);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    }</div>
</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span> </div>
<div class="foldopen" id="foldopen00449" data-start="{" data-end="}">
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a9a32021b55f7eee1ec97a1ead9c58f25">  449</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">char</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a9a32021b55f7eee1ec97a1ead9c58f25">putcqq</a>(<span class="keywordtype">char</span> c)</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    {</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">echo</a>) { <a class="code hl_function" href="ads1258_8h.html#aac4a82c72fa3b8a5f87bfa525126205b">formatf</a>(<span class="stringliteral">&quot;&gt;%.2x &quot;</span>, (uint8_t)c); }</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        <span class="keywordflow">if</span> (-1 != <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>)</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        {</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>            <span class="keywordtype">size_t</span> len = write(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, &amp;c, 1);</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            <span class="keywordflow">if</span> (len != 1) </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            { </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>                printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::putcqq(): write failure (len: %lu, errno: %lu)\n&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)len, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)errno);</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>                </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">autoreopen</a>) </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>                {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>                    printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::autoreopen.\n&quot;</span>);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>                    <a class="code hl_function" href="classlinux__pinout__uart.html#ad03be9ea9049db75a79f297f166edc65">deinit</a>();</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>                    <a class="code hl_function" href="classlinux__pinout__uart.html#ac3caab2514512ce7592f3cdd15187b83">init</a>(<a class="code hl_variable" href="classlinux__pinout__uart.html#a8e8a9dd5ea5bba02d3fb38d68e14d9cf">Baud</a>, <a class="code hl_variable" href="classlinux__pinout__uart.html#a2de843ce978e2079aab5a2b3f3fefad2">Device</a>, <a class="code hl_variable" href="classlinux__pinout__uart.html#a3de4f0fbe4ed751fb91e9e8d8894edd8">RtsCts</a>, <a class="code hl_variable" href="classlinux__pinout__uart.html#ad5a3c0a3812dadfd0490adc25b927a2d">OddParity</a>);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>                }       </div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>                </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                 <span class="keywordflow">return</span>(<span class="charliteral">&#39;\0&#39;</span>); </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>            }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            <span class="comment">//~ else { printf(&quot;linux_pinout_uart::putcqq(0x%.2X);\n&quot;, c); }</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>            </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>            <span class="comment">//~ int BytesWaitingToWrite;</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>            <span class="comment">//~ ioctl(ComFileDescriptor, TIOCOUTQ, &amp;BytesWaitingToWrite); //get number of bytes in output buffer</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>            <span class="comment">//~ printf(&quot;linux_pinout_uart::putcqq(): bytes in output buffer: %u\n&quot;, BytesWaitingToWrite);           </span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        }</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>            printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::putcqq(): read on uninitialized port; please open port!\n&quot;</span>);</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        <span class="keywordflow">return</span> (c);</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    }</div>
</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="foldopen" id="foldopen00483" data-start="{" data-end="}">
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a7f973b72bdfd52d39dcb0485f1f35f33">  483</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a7f973b72bdfd52d39dcb0485f1f35f33">flushoutput</a>()</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    {</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>        <span class="keywordflow">if</span> (-1 != <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>)</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>            fsync(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>);</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            <span class="comment">//~ int BytesWaitingToWrite;</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            <span class="comment">//~ ioctl(ComFileDescriptor, TIOCOUTQ, &amp;BytesWaitingToWrite); //get number of bytes in output buffer</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>            <span class="comment">//~ printf(&quot;linux_pinout_uart::flushoutput(): bytes in output buffer: %u\n&quot;, BytesWaitingToWrite);</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        }</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        {</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>            printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::flushout(): fflush on uninitialized port; please open port!\n&quot;</span>);</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    }</div>
</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    </div>
<div class="foldopen" id="foldopen00498" data-start="{" data-end="}">
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#ac567162314bf11cd3d5a7e4e41acd802">  498</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classlinux__pinout__uart.html#ac567162314bf11cd3d5a7e4e41acd802">purgeinput</a>()</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    {</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        <span class="keywordflow">if</span> (-1 != <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>)</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        {</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>            tcflush(<a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>, TCIFLUSH);</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        }</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            printf(<span class="stringliteral">&quot;\nlinux_pinout_uart::purgeinput(): tcflush on uninitialized port; please open port!\n&quot;</span>);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    }</div>
</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    </div>
<div class="foldopen" id="foldopen00510" data-start="{" data-end="}">
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a712e3836f362ba094f62cec432fe953c">  510</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a712e3836f362ba094f62cec432fe953c">flush</a>()</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    {</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <a class="code hl_function" href="classlinux__pinout__uart.html#a7f973b72bdfd52d39dcb0485f1f35f33">flushoutput</a>();</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        <a class="code hl_function" href="classlinux__pinout__uart.html#ac567162314bf11cd3d5a7e4e41acd802">purgeinput</a>();</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    }</div>
</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a00c5f3242250b2f7ef36f9af5e3b8408">  516</a></span>    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a00c5f3242250b2f7ef36f9af5e3b8408">isopen</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span>(-1 != <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>); }</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    </div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a6e2ad1992f04cfed57ee1918c29dd85a">  518</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classlinux__pinout__uart.html#a6e2ad1992f04cfed57ee1918c29dd85a">AutoReopen</a>() { <span class="keywordflow">return</span>(<a class="code hl_variable" href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">autoreopen</a>); }</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    </div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#af16b07d9f925d6ceed25b252c4018323">  520</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classlinux__pinout__uart.html#af16b07d9f925d6ceed25b252c4018323">AutoReopen</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> ar) { <a class="code hl_variable" href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">autoreopen</a> = ar; }</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    </div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">  524</a></span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">ComFileDescriptor</a>; <span class="comment">//-1: not open</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">  526</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">echo</a>;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    </div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">  528</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">autoreopen</a>;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a8e8a9dd5ea5bba02d3fb38d68e14d9cf">  530</a></span>        uint32_t <a class="code hl_variable" href="classlinux__pinout__uart.html#a8e8a9dd5ea5bba02d3fb38d68e14d9cf">Baud</a>;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a620f564c864c51767b1cd6a9191fab96">  531</a></span>        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="classlinux__pinout__uart.html#a620f564c864c51767b1cd6a9191fab96">DeviceMaxLen</a> = 256;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a2de843ce978e2079aab5a2b3f3fefad2">  532</a></span>        <span class="keywordtype">char</span> <a class="code hl_variable" href="classlinux__pinout__uart.html#a2de843ce978e2079aab5a2b3f3fefad2">Device</a>[<a class="code hl_variable" href="classlinux__pinout__uart.html#a620f564c864c51767b1cd6a9191fab96">DeviceMaxLen</a>];</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#a3de4f0fbe4ed751fb91e9e8d8894edd8">  533</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="classlinux__pinout__uart.html#a3de4f0fbe4ed751fb91e9e8d8894edd8">RtsCts</a>;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno"><a class="line" href="classlinux__pinout__uart.html#ad5a3c0a3812dadfd0490adc25b927a2d">  534</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="classlinux__pinout__uart.html#ad5a3c0a3812dadfd0490adc25b927a2d">OddParity</a>;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>};</div>
</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span><span class="preprocessor">#endif </span><span class="comment">//linux_pinout_uart_h</span></div>
<div class="ttc" id="aIUart_8h_html"><div class="ttname"><a href="IUart_8h.html">IUart.h</a></div></div>
<div class="ttc" id="aads1258_8h_html_aac4a82c72fa3b8a5f87bfa525126205b"><div class="ttname"><a href="ads1258_8h.html#aac4a82c72fa3b8a5f87bfa525126205b">formatf</a></div><div class="ttdeci">void formatf()</div><div class="ttdef"><b>Definition</b> <a href="ads1258_8h_source.html#l00010">ads1258.h:10</a></div></div>
<div class="ttc" id="aads1258_8h_html_aff251facbcc9240b47fafda164302bd1"><div class="ttname"><a href="ads1258_8h.html#aff251facbcc9240b47fafda164302bd1">status</a></div><div class="ttdeci">ads1258status status</div><div class="ttdef"><b>Definition</b> <a href="ads1258_8h_source.html#l00001">ads1258.h:1</a></div></div>
<div class="ttc" id="aclassIUart_html"><div class="ttname"><a href="classIUart.html">IUart</a></div><div class="ttdoc">Copyright (c) by Franks Development, LLC.</div><div class="ttdef"><b>Definition</b> <a href="IUart_8h_source.html#l00031">IUart.h:32</a></div></div>
<div class="ttc" id="aclassIUart_html_a5596bc1c37a997ad63f6fd7273f0f582"><div class="ttname"><a href="classIUart.html#a5596bc1c37a997ad63f6fd7273f0f582">IUart::NoRTSCTS</a></div><div class="ttdeci">static const bool NoRTSCTS</div><div class="ttdef"><b>Definition</b> <a href="IUart_8h_source.html#l00041">IUart.h:41</a></div></div>
<div class="ttc" id="aclassIUart_html_a9405c72ad2eb119d094adf84745a0354"><div class="ttname"><a href="classIUart.html#a9405c72ad2eb119d094adf84745a0354">IUart::NoParity</a></div><div class="ttdeci">static const bool NoParity</div><div class="ttdef"><b>Definition</b> <a href="IUart_8h_source.html#l00038">IUart.h:38</a></div></div>
<div class="ttc" id="aclassIUart_html_a9b07f9f0939ad012fe6cf88945419f6e"><div class="ttname"><a href="classIUart.html#a9b07f9f0939ad012fe6cf88945419f6e">IUart::IUartOK</a></div><div class="ttdeci">static const bool IUartOK</div><div class="ttdef"><b>Definition</b> <a href="IUart_8h_source.html#l00039">IUart.h:39</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html"><div class="ttname"><a href="classlinux__pinout__uart.html">linux_pinout_uart</a></div><div class="ttdoc">Copyright (c) by Franks Development, LLC.</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00048">linux_pinout_uart.hpp:49</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a00c5f3242250b2f7ef36f9af5e3b8408"><div class="ttname"><a href="classlinux__pinout__uart.html#a00c5f3242250b2f7ef36f9af5e3b8408">linux_pinout_uart::isopen</a></div><div class="ttdeci">virtual bool isopen() const</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00516">linux_pinout_uart.hpp:516</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a091a28e54ef5d6f5d08f2a9000a44b98"><div class="ttname"><a href="classlinux__pinout__uart.html#a091a28e54ef5d6f5d08f2a9000a44b98">linux_pinout_uart::linux_pinout_uart</a></div><div class="ttdeci">linux_pinout_uart()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00052">linux_pinout_uart.hpp:52</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a2de843ce978e2079aab5a2b3f3fefad2"><div class="ttname"><a href="classlinux__pinout__uart.html#a2de843ce978e2079aab5a2b3f3fefad2">linux_pinout_uart::Device</a></div><div class="ttdeci">char Device[DeviceMaxLen]</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00532">linux_pinout_uart.hpp:532</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a3a4c13fd7b6bce8061b37438a029e21c"><div class="ttname"><a href="classlinux__pinout__uart.html#a3a4c13fd7b6bce8061b37438a029e21c">linux_pinout_uart::dataready</a></div><div class="ttdeci">virtual bool dataready() const</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00363">linux_pinout_uart.hpp:363</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a3b4f0d416ec74f7c4c8e5e0bf89c8ffa"><div class="ttname"><a href="classlinux__pinout__uart.html#a3b4f0d416ec74f7c4c8e5e0bf89c8ffa">linux_pinout_uart::autoreopen</a></div><div class="ttdeci">bool autoreopen</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00528">linux_pinout_uart.hpp:528</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a3de4f0fbe4ed751fb91e9e8d8894edd8"><div class="ttname"><a href="classlinux__pinout__uart.html#a3de4f0fbe4ed751fb91e9e8d8894edd8">linux_pinout_uart::RtsCts</a></div><div class="ttdeci">bool RtsCts</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00533">linux_pinout_uart.hpp:533</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a4ec5263e4a98bd3d1b827a98e4e8e90d"><div class="ttname"><a href="classlinux__pinout__uart.html#a4ec5263e4a98bd3d1b827a98e4e8e90d">linux_pinout_uart::getcqq</a></div><div class="ttdeci">virtual char getcqq()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00420">linux_pinout_uart.hpp:420</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a620f564c864c51767b1cd6a9191fab96"><div class="ttname"><a href="classlinux__pinout__uart.html#a620f564c864c51767b1cd6a9191fab96">linux_pinout_uart::DeviceMaxLen</a></div><div class="ttdeci">static const size_t DeviceMaxLen</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00531">linux_pinout_uart.hpp:531</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a6e2ad1992f04cfed57ee1918c29dd85a"><div class="ttname"><a href="classlinux__pinout__uart.html#a6e2ad1992f04cfed57ee1918c29dd85a">linux_pinout_uart::AutoReopen</a></div><div class="ttdeci">bool AutoReopen()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00518">linux_pinout_uart.hpp:518</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a712e3836f362ba094f62cec432fe953c"><div class="ttname"><a href="classlinux__pinout__uart.html#a712e3836f362ba094f62cec432fe953c">linux_pinout_uart::flush</a></div><div class="ttdeci">virtual void flush()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00510">linux_pinout_uart.hpp:510</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a735eb21c5d7a21cfcbec5a09d3b09bcc"><div class="ttname"><a href="classlinux__pinout__uart.html#a735eb21c5d7a21cfcbec5a09d3b09bcc">linux_pinout_uart::Echo</a></div><div class="ttdeci">virtual void Echo(const bool e)</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00336">linux_pinout_uart.hpp:336</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a7f973b72bdfd52d39dcb0485f1f35f33"><div class="ttname"><a href="classlinux__pinout__uart.html#a7f973b72bdfd52d39dcb0485f1f35f33">linux_pinout_uart::flushoutput</a></div><div class="ttdeci">virtual void flushoutput()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00483">linux_pinout_uart.hpp:483</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a8e8a9dd5ea5bba02d3fb38d68e14d9cf"><div class="ttname"><a href="classlinux__pinout__uart.html#a8e8a9dd5ea5bba02d3fb38d68e14d9cf">linux_pinout_uart::Baud</a></div><div class="ttdeci">uint32_t Baud</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00530">linux_pinout_uart.hpp:530</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a97d0fedac6069d508b25746e6faeafca"><div class="ttname"><a href="classlinux__pinout__uart.html#a97d0fedac6069d508b25746e6faeafca">linux_pinout_uart::echo</a></div><div class="ttdeci">bool echo</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00526">linux_pinout_uart.hpp:526</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_a9a32021b55f7eee1ec97a1ead9c58f25"><div class="ttname"><a href="classlinux__pinout__uart.html#a9a32021b55f7eee1ec97a1ead9c58f25">linux_pinout_uart::putcqq</a></div><div class="ttdeci">virtual char putcqq(char c)</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00449">linux_pinout_uart.hpp:449</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_ac3caab2514512ce7592f3cdd15187b83"><div class="ttname"><a href="classlinux__pinout__uart.html#ac3caab2514512ce7592f3cdd15187b83">linux_pinout_uart::init</a></div><div class="ttdeci">virtual int init(const uint32_t Baudrate, const char *device, const bool UseRtsCts=IUart::NoRTSCTS, const bool UseOddParity=IUart::NoParity, int OpenFlags=O_RDWR|O_NOCTTY|O_NONBLOCK|O_SYNC)</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00142">linux_pinout_uart.hpp:142</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_ac567162314bf11cd3d5a7e4e41acd802"><div class="ttname"><a href="classlinux__pinout__uart.html#ac567162314bf11cd3d5a7e4e41acd802">linux_pinout_uart::purgeinput</a></div><div class="ttdeci">virtual void purgeinput()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00498">linux_pinout_uart.hpp:498</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_ac84a6af46b4cf5c05e62567cc0b37877"><div class="ttname"><a href="classlinux__pinout__uart.html#ac84a6af46b4cf5c05e62567cc0b37877">linux_pinout_uart::~linux_pinout_uart</a></div><div class="ttdeci">virtual ~linux_pinout_uart()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00054">linux_pinout_uart.hpp:54</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_ad03be9ea9049db75a79f297f166edc65"><div class="ttname"><a href="classlinux__pinout__uart.html#ad03be9ea9049db75a79f297f166edc65">linux_pinout_uart::deinit</a></div><div class="ttdeci">virtual void deinit()</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00326">linux_pinout_uart.hpp:326</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_ad5a3c0a3812dadfd0490adc25b927a2d"><div class="ttname"><a href="classlinux__pinout__uart.html#ad5a3c0a3812dadfd0490adc25b927a2d">linux_pinout_uart::OddParity</a></div><div class="ttdeci">bool OddParity</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00534">linux_pinout_uart.hpp:534</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_af16b07d9f925d6ceed25b252c4018323"><div class="ttname"><a href="classlinux__pinout__uart.html#af16b07d9f925d6ceed25b252c4018323">linux_pinout_uart::AutoReopen</a></div><div class="ttdeci">void AutoReopen(const bool ar)</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00520">linux_pinout_uart.hpp:520</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_af789f9adecfa28194c741e798eb50583"><div class="ttname"><a href="classlinux__pinout__uart.html#af789f9adecfa28194c741e798eb50583">linux_pinout_uart::Echo</a></div><div class="ttdeci">virtual bool Echo() const</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00335">linux_pinout_uart.hpp:335</a></div></div>
<div class="ttc" id="aclasslinux__pinout__uart_html_afd26a4a8ee681d87611dae8d3715af3d"><div class="ttname"><a href="classlinux__pinout__uart.html#afd26a4a8ee681d87611dae8d3715af3d">linux_pinout_uart::ComFileDescriptor</a></div><div class="ttdeci">int ComFileDescriptor</div><div class="ttdef"><b>Definition</b> <a href="linux__pinout__uart_8hpp_source.html#l00524">linux_pinout_uart.hpp:524</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_d6f08dacffa511a6d27e4de96b253a49.html">uart</a></li><li class="navelem"><a class="el" href="linux__pinout__uart_8hpp.html">linux_pinout_uart.hpp</a></li>
    <li class="footer">Generated on Thu Jul 3 2025 21:38:58 for ESC FilterWheel C++ Source by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
